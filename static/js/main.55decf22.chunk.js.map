{"version":3,"sources":["hooks/audio.js","hooks/timer.js","hooks/table.js","styled/Button.js","components/Header.js","components/ActionStatus.js","components/ErrorMessage.js","styled/Select.js","styled/Input.js","components/InputArea.js","components/HelpMessage.js","App.js","reportWebVitals.js","index.js"],"names":["urls","defaultTime","Date","now","stringify","table","str","i","length","duration","name","slice","reducer","state","action","idx","field","value","to","type","parseInt","isNaN","Math","min","max","result","useTable","defaultTable","useState","error","setError","useReducer","setTable","tableString","setLink","loadHash","useCallback","hash","window","location","tokens","split","num","parseFloat","isFinite","decodeURIComponent","e","push","tryParse","err","useEffect","addEventListener","styled","button","ButtonRow","nav","Header","React","memo","running","onRunning","onReset","audio","onAudio","Button","onClick","MainInfo","h1","StyledActionStatus","div","SecondHeader","h2","SecondText","ActionStatus","currentAction","currentDuration","nextAction","nextDuration","restTime","toFixed","Container","ErrorMessage","children","select","input","Ul","ul","Li","li","props","current","InputArea","changeTable","gotoAction","add","remove","edit","event","target","changeIndex","map","className","Select","onChange","_","Input","onInput","Link","a","hashSection","href","lastIndexOf","url","rel","StyledApp","App","time","setTime","setInterval","useTimer","prevTime","currentTime","audioEl","setAudioEl","working","setWorking","size","Audio","switchAudio","playAudio","readyState","HTMLMediaElement","HAVE_CURRENT_DATA","play","audioError","useAudio","position","setPosition","setRunning","setRestTime","savedAction","setSavedAction","nextPosition","diff","newPosition","useMemo","HelpMessage","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","activeElement","classList","contains","blur"],"mappings":"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","file":"static/js/main.55decf22.chunk.js","sourcesContent":["import { useState, useCallback, useEffect } from 'react'\n\nconst urls = ['audio/time-is-now.mp3', 'audio/point-blank.mp3']\n\nexport const useAudio = () => {\n  // const [loading, setLoading] = useState(true)\n  const [audioEl, setAudioEl] = useState([])\n  const [working, setWorking] = useState(false)\n  const [error, setError] = useState(null)\n  const size = audioEl.length\n\n  // console.log('audio', working)\n\n  useEffect(() => {\n    setAudioEl(urls.map((e) => new Audio(e)))\n  }, [])\n\n  const switchAudio = useCallback(() => {\n    setWorking((working) => {\n      if (working) setError(null)\n      return !working\n    })\n  }, [])\n\n  const playAudio = useCallback(\n    async (idx) => {\n      if (working && size > 0) {\n        idx = (size + idx) % audioEl.length\n\n        if (audioEl[idx].readyState >= HTMLMediaElement.HAVE_CURRENT_DATA) {\n          if (audioEl[idx] == null) {\n            setError(`audioEl[${idx}] is null`)\n            return\n          }\n          audioEl[idx].currentTime = 0\n          try {\n            await audioEl[idx].play()\n          } catch (e) {\n            setError(`audioEl[${idx}] : ${e}`)\n          }\n        }\n      }\n    },\n    [audioEl, size, working]\n  )\n\n  return { audio: working, switchAudio, playAudio, audioError: error }\n}\n","import { useEffect, useState, useCallback, useReducer } from 'react'\n\nconst defaultTime = [Date.now(), Date.now()]\n\nexport const useTimer = () => {\n  const [time, setTime] = useState(defaultTime)\n\n  // console.log(time[1] - time[0])\n\n  useEffect(() => {\n    // const timer = setTime(() => {\n    //   setTime((time) => [...time, Date.now()].slice(-2))\n    // }, 150)\n    // return () => clearTimeout(timer)\n    // console.log('setup timer effect')\n    const interval = setInterval(() => {\n      setTime((time) => [...time, Date.now()].slice(-2))\n    }, 500)\n  }, [])\n\n  return time\n}\n","import { useState, useEffect, useCallback, useReducer } from 'react'\n\nconst tryParse = (str) => {\n  let tokens = str.split(',')\n\n  if (tokens[tokens.length - 1] === '') {\n    tokens = tokens.slice(0, -1)\n  }\n\n  const result = []\n\n  for (let i = 0; i < tokens.length; i++) {\n    const num = parseFloat(tokens[i])\n    if (!(isFinite(num) && num >= 0)) {\n      return [`${i} item, expected finite >= 0 float, got ${tokens[i]}`]\n    }\n\n    let name = ''\n\n    if (++i < tokens.length) {\n      try {\n        name = decodeURIComponent(tokens[i])\n      } catch (e) {\n        return [`${i} item, decodeURIComponent error ${e}, got ${tokens[i]}`]\n      }\n    }\n\n    result.push({\n      duration: num,\n      name: name,\n    })\n  }\n\n  return [null, result]\n}\n\nconst stringify = (table) => {\n  let str = ''\n  for (let i = 0; i < table.length; i++) {\n    str += table[i].duration + ',' + table[i].name + ','\n  }\n\n  if (str.slice(-2) === ',,') str = str.slice(0, -1)\n  return str\n}\n\nconst reducer = (state, action) => {\n  let { idx, field, value, to } = action\n  switch (action.type) {\n    case 'add':\n      return [...state, { name: 'new action', duration: 60 }]\n\n    case 'remove':\n      // let { idx } = action\n      if (state.length === 1) return state\n      return [...state.slice(0, idx), ...state.slice(idx + 1)]\n\n    case 'edit':\n      // let { idx, field, value } = action\n      if (field === 'duration') {\n        if (value === '') value = 0\n        value = parseInt(value)\n        if (isNaN(value)) return state\n        if (value < 0) return state\n      }\n      return [\n        ...state.slice(0, idx),\n        { ...state[idx], [field]: value },\n        ...state.slice(idx + 1),\n      ]\n\n    case 'move':\n      const min = Math.min(idx, to)\n      const max = Math.max(idx, to)\n      // console.log('move', min, max)\n      if (min === max) return state\n      const result = state.slice()\n      result[idx] = state[to]\n      result[to] = state[idx]\n      return result\n\n    case 'set':\n      return value\n\n    default:\n      return state\n  }\n}\n\nconst useTable = (defaultTable) => {\n  const [error, setError] = useState(null)\n  const [table, setTable] = useReducer(reducer, defaultTable)\n  const [tableString, setLink] = useState(() => stringify(defaultTable))\n\n  const loadHash = useCallback(() => {\n    let hash = window.location.hash\n    if (hash[0] === '#') hash = hash.slice(1)\n    if (hash.length === 0) return\n\n    const [err, result] = tryParse(hash)\n    if (err) return setError(err)\n\n    setError(null)\n    setTable({ type: 'set', value: result })\n    setLink(stringify(result))\n  }, [])\n\n  // listen for changes but not change\n  useEffect(() => {\n    if (window.location.hash.length > 2) {\n      loadHash()\n    }\n    window.addEventListener('hashchange', () => {\n      loadHash()\n    })\n  }, [loadHash])\n\n  useEffect(() => {\n    setLink(stringify(table))\n  }, [table])\n\n  return { table, setTable, error, tableString }\n}\n\nexport default useTable\n","import styled from 'styled-components'\n\nexport default styled.button`\n  display: inline-block;\n  background-color: #000;\n  margin: 3px;\n  border: 1px solid #eee;\n  color: #eee;\n  font-size: 2rem;\n  box-sizing: border-box;\n  padding: 5px;\n\n  &:focus {\n    outline: 3px solid #eee;\n  }\n\n  @media (min-width: 600px) {\n    font-size: 1rem;\n  }\n`\n","import React from 'react'\n\nimport styled from 'styled-components'\nimport Button from '../styled/Button'\n\nconst ButtonRow = styled.nav`\n  display: flex;\n  align-items: baseline;\n  & > * {\n    flex-basis: 150px;\n  }\n\n  @media (max-width: 600px) {\n    & > * {\n      font-size: 1em;\n      flex-grow: 1;\n      flex-basis: 0;\n    }\n  }\n`\n\nconst Header = React.memo(({ running, onRunning, onReset, audio, onAudio }) => (\n  <header>\n    <h1>\n      Timeboxing timer <span>- {running ? 'running' : 'stopped'}</span>\n    </h1>\n    <ButtonRow>\n      <Button onClick={onRunning}>{running ? 'stop' : 'run'}</Button>\n      <Button onClick={onReset}>reset timer</Button>\n      <Button onClick={onAudio}>\n        {audio ? 'audio playing' : 'audio muted'}\n      </Button>\n    </ButtonRow>\n  </header>\n))\nexport default Header\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst MainInfo = styled.h1`\n  font-family: monospace;\n  margin: 0;\n`\n\nconst StyledActionStatus = styled.div`\n  margin: 20px 0;\n`\n\nconst SecondHeader = styled.h2`\n  margin: 20px 0 0 0;\n  font-size: 1.2rem;\n`\n\nconst SecondText = styled.div``\n\nconst ActionStatus = React.memo(\n  ({ currentAction, currentDuration, nextAction, nextDuration, restTime }) => (\n    <StyledActionStatus>\n      <MainInfo>rest time: {(restTime / 1000).toFixed(0)}s</MainInfo>\n      <MainInfo>\n        {currentDuration}s - {currentAction}\n      </MainInfo>\n      <SecondHeader>next</SecondHeader>\n      <SecondText>\n        {nextDuration}s - {nextAction}\n      </SecondText>\n    </StyledActionStatus>\n  )\n)\n\nexport default ActionStatus\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst Container = styled.div`\n  box-sizing: border-box;\n  width: 100%;\n  background-color: #d83c3499;\n\n  border: 2px solid #fff4;\n  padding: 10px 5px;\n  font-size: 1.1rem;\n`\n\nconst ErrorMessage = ({ children }) => {\n  return <Container>{children}</Container>\n}\n\nexport default ErrorMessage\n","import styled from 'styled-components'\n\nexport default styled.select`\n  background-color: #000;\n  margin: 3px;\n  border: 1px solid #eee;\n  color: #eee;\n  font-size: 2rem;\n  box-sizing: border-box;\n  padding: 5px;\n\n  &:focus {\n    outline: 3px solid #eee;\n  }\n\n  @media (min-width: 600px) {\n    font-size: 1rem;\n  }\n`\n","import styled from 'styled-components'\n\nexport default styled.input`\n  background-color: #000;\n  margin: 3px;\n  color: #eee;\n  border: 1px solid #eee;\n  font-size: 2rem;\n  box-sizing: border-box;\n  padding: 5px;\n\n  &:focus {\n    outline: 3px solid #eee;\n  }\n\n  @media (min-width: 600px) {\n    font-size: 1rem;\n  }\n`\n","import React, { useCallback } from 'react'\nimport styled from 'styled-components'\n\nimport Button from '../styled/Button'\nimport Select from '../styled/Select'\nimport Input from '../styled/Input'\n\nconst Ul = styled.ul`\n  list-style-type: none;\n  padding: 0;\n  margin: 0;\n`\n\nconst Li = styled.li`\n  &:nth-child(even) {\n    background: #222;\n  }\n\n  & {\n    padding: 5px;\n    box-sizing: border-box;\n\n    ${(props) => props.current && 'background-color: #666 !important'}\n  }\n\n  @media (max-width: 600px) {\n    & {\n      display: flex;\n      flex-wrap: wrap;\n      width: 100%;\n      padding: 10px;\n    }\n\n    & > input {\n      order: -1;\n      width: 100%;\n      flex-basis: 100%;\n      flex-grow: 1;\n    }\n\n    & > .item {\n      flex-grow: 1;\n      flex-basis: 0;\n    }\n  }\n`\n\nconst InputArea = React.memo(\n  ({ changeTable, children, gotoAction, currentAction }) => {\n    const add = useCallback(() => changeTable({ type: 'add' }), [changeTable])\n\n    const remove = useCallback(\n      (idx) => () => changeTable({ type: 'remove', idx }),\n      [changeTable]\n    )\n\n    const edit = useCallback(\n      (idx) => (event) =>\n        changeTable({\n          type: 'edit',\n          idx,\n          field: event.target.name,\n          value: event.target.value,\n        }),\n      [changeTable]\n    )\n\n    const changeIndex = useCallback(\n      (idx) => (event) =>\n        changeTable({ type: 'move', idx, to: parseInt(event.target.value) }),\n      [changeTable]\n    )\n\n    return (\n      <Ul>\n        <Li>\n          <Button onClick={add}>add action</Button>\n        </Li>\n        {children.map((e, i) => (\n          <Li key={i} current={currentAction === i}>\n            <Button className=\"item\" onClick={remove(i)}>\n              -\n            </Button>\n            <Select className=\"item\" value={i} onChange={changeIndex(i)}>\n              {children.map((_, idx) => (\n                <option key={idx} value={idx}>\n                  {idx + 1}\n                </option>\n              ))}\n            </Select>\n            <Input\n              type=\"number\"\n              name=\"duration\"\n              onInput={edit(i)}\n              value={e.duration}\n            />\n            <Input type=\"text\" name=\"name\" onInput={edit(i)} value={e.name} />\n            <Button className=\"item\" onClick={() => gotoAction(i)}>\n              goto\n            </Button>\n          </Li>\n        ))}\n      </Ul>\n    )\n  }\n)\n\nexport default InputArea\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst Container = styled.div`\n  white-space: no;\n`\nconst Ul = styled.ul`\n  padding: 0 20px 0 25px;\n`\n\nconst Link = styled.a`\n  color: #eee;\n  word-break: break-all;\n`\n\nexport default React.memo(({ tableString }) => {\n  const hashSection = window.location.href.lastIndexOf(window.location.hash)\n  const prefixUrl = window.location.href.slice(0, hashSection)\n  const url = prefixUrl + '#' + tableString\n\n  return (\n    <Container>\n      <h2>How to use it</h2>\n      <Ul>\n        <li>Audio - by default muted</li>\n        <li>run/stop button - resets timer on stop</li>\n        <li>\n          you can save your schedule as link - all information are stored in URL\n        </li>\n        <li>\n          current share link:{' '}\n          <Link href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n            {url}\n          </Link>\n        </li>\n      </Ul>\n    </Container>\n  )\n})\n","import React, { useState, useEffect, useCallback, useMemo } from 'react'\nimport { useAudio } from './hooks/audio'\nimport { useTimer } from './hooks/timer'\nimport useTable from './hooks/table'\n\nimport styled from 'styled-components'\n\nimport Header from './components/Header'\nimport ActionStatus from './components/ActionStatus'\nimport ErrorMessage from './components/ErrorMessage'\nimport InputArea from './components/InputArea'\nimport HelpMessage from './components/HelpMessage'\n\n// const useTable = (value) => {\n//   const [state, dispatch] = useReducer(reducer, { table: value })\n\n//   const reducer = (state, action) => {\n//     switch (action.type) {\n//       case 'timing'\n//       default:\n//         console.log('hello')\n//     }\n//   }\n// }\n\nconst StyledApp = styled.div`\n  background: #000;\n  color: #eee;\n  padding: 8px;\n  display: flex;\n  flex-direction: column;\n`\n\nconst defaultTable = [\n  { name: 'switching to anki', duration: 5 },\n  { name: 'anki', duration: 300 },\n  { name: 'switching to anime', duration: 5 },\n  { name: 'anime', duration: 300 },\n]\n\n// let t = null\n// const textareaString = tableToString(defaultTable)\n\nconst App = () => {\n  const [prevTime, currentTime] = useTimer()\n  const { audio, switchAudio, playAudio } = useAudio()\n  // console.log(currentTime, prevTime)\n  // const diff = currentTime - prevTime\n\n  const { table, setTable, error, tableString } = useTable(defaultTable)\n\n  // if (!Object.is(t, table)) {\n  //   console.log('table has changed', t, table)\n  // }\n  // t = table\n\n  const [position, setPosition] = useState(0)\n  const [running, setRunning] = useState(false)\n  const [restTime, setRestTime] = useState(table[0].duration * 1000)\n\n  const [savedAction, setSavedAction] = useState({})\n\n  const nextPosition = (position + 1) % table.length\n  // const [oldTime, setOldTime] = useState(0)\n  useEffect(() => {\n    if (running) {\n      setRestTime((restTime) => {\n        // if (running) {\n        const diff = restTime - (currentTime - prevTime)\n        if (diff > 0) return diff\n        else {\n          playAudio(nextPosition)\n          setPosition(nextPosition)\n          setSavedAction({ ...table[nextPosition] })\n          return table[nextPosition].duration * 1000 + diff\n        }\n        // }\n      })\n    }\n  }, [playAudio, position, table, running, currentTime, prevTime, nextPosition])\n\n  useEffect(() => {\n    if (!running) {\n      const newPosition = position < table.length ? position : 0\n      setSavedAction({ ...table[newPosition] })\n      setRestTime(table[newPosition].duration * 1000)\n      setPosition(newPosition)\n    }\n  }, [table, running, position])\n\n  const onRunning = useMemo(() => {\n    return () => {\n      setRunning((running) => {\n        if (!running) playAudio(position)\n        return !running\n      })\n    }\n  }, [position, playAudio])\n\n  const onReset = useCallback(() => {\n    setRunning(false)\n    setPosition(0)\n    setRestTime(table[0].duration * 1000)\n  }, [table])\n\n  const gotoAction = useCallback(\n    (i) => {\n      setRunning(false)\n      setSavedAction({ ...table[i] })\n      setRestTime(table[i].duration * 1000)\n      setPosition(i)\n    },\n    [table]\n  )\n\n  return (\n    <StyledApp>\n      {error && <ErrorMessage>{error}</ErrorMessage>}\n      <HelpMessage tableString={tableString} />\n      <Header\n        onRunning={onRunning}\n        running={running}\n        onReset={onReset}\n        audio={audio}\n        onAudio={switchAudio}\n        // {...{ onRunning, running, onReset, audio, onAudio: switchAudio }}\n      />\n      <ActionStatus\n        restTime={restTime}\n        currentAction={savedAction.name}\n        currentDuration={savedAction.duration}\n        nextAction={table[nextPosition].name}\n        nextDuration={table[nextPosition].duration}\n      />\n      <InputArea\n        changeTable={setTable}\n        gotoAction={gotoAction}\n        currentAction={position}\n      >\n        {table}\n      </InputArea>\n    </StyledApp>\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\ndocument.addEventListener('wheel', (e) => {\n  if (\n    document.activeElement.type === 'number' &&\n    document.activeElement.classList.contains('noscroll')\n  ) {\n    document.activeElement.blur()\n  }\n})\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}